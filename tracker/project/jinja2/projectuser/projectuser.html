{% if  standalone %} 
    {% extends "base.html" %} 
    {% block sidebar %}
        {%include "shared/sidebar.html"%}
    {%endblock%}
{% endif %}


{% block content%}
<div id="main-content" class="row" hx-swap-oob="true">
    <div class="card col-3" id="projects">
          <div class="card-header ">
              <span>Projects</span>
          </div>
          <ul class="list-group list-group-flush">
          </ul>
    </div>

    <div class="card col-9 pb-5">
        <div  id="main-sub-content">

        </div>
    </div>

    <script type="module" >
        import {ui_state, inplace_char_edit} from "d3-ui";
        const project_group = {{dumps(inst)|safe}};

        d3.select("#projects ul")
          .selectAll("li.list-group-item")
          .data(project_group.projects,d=>d.id)
          .join("li")
          .attr("class","list-group-item p-1")
          .selectAll("button.project-link")
          .data(d=>[d],d=>d.id)
          .join("button")
          .attr( "class", "btn btn-link project-link text-start p-1")
          .attrs({
            "hx-target" : "#main-sub-content",
          })
          .attr("hx-get",d=>d.__url__)
          .setup_htmx()
          .html(d=>d.name)

        document.addEventListener("htmx:swapError",event => {
            console.log(event)
        })


    </script>
</div>
{%endblock%}


