<div id="task{{task.id}}">
</div>
<script type="module">

import  {append_edit_fk, append_edit_attr } from "d3-ui";
(()=>{
    const observable_data = mobx.makeAutoObservable(
        {{dumps(task)|safe}}
    );
    d3.select("#task{{task.id}}")
        .append("div")
        .data([observable_data])
        .join("div")
        .classed("col-4 border pe-0" ,true)
        .call(function(selection){
            append_edit_attr(selection, observable_data, "name", "Name");
            append_edit_attr(selection, observable_data, "text","Notes");
            append_edit_attr(selection, observable_data, "start_date", "Start Date");
            append_edit_attr(selection, observable_data, "target_date","Target Date");
            append_edit_fk(selection, observable_data,"lead", "Contact");
            append_edit_fk(selection, observable_data,"teams", "Teams");
            append_edit_fk(selection, observable_data,"competency", "Competency");
            append_edit_attr(selection, observable_data,"done", "Done");
        })


})()
</script>

{#
<!--
<div class="col-4 border pe-0" 
     x-data='task(
    {{dumps(task)}}, 
    "{{url("core:rest", kwargs={"pk" : task.id, "m" : "project.Task"})}}",
    "{{url("core:text_ac", kwargs={"pk" : task.id,"attr" : "__replace__", "m" : "project.Task"})}}",
    )'>
    <div class="d-flex justify-content-end">
        <div class="">
            <button class="btn btn-light dropdown-toggle" 
                     type="button" 
                     id="dropdownMenuButton{{task.id}}" 
                     data-bs-toggle="dropdown" 
                     aria-expanded="false">
            â‹®
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton{{task.id}}">
                <li class="dropdown-item">
                    {%with params=add_encode_parameter("f",{ "trigger" : make_signal_from_model("project.Task")}),
                           _url =  url("core:rest", kwargs={"pk" : task.id, "m" : "project.Task"})
                    %}
                    <button class="btn btn-link"
                            hx-delete="{{_url}}?{{params}}"
                            hx-swap="none"> 
                        Delete</button>

                    {%endwith%}
                </li>
            </ul>
        </div>
    </div>

</div>
-->
#}
