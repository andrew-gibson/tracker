
<!DOCTYPE html>
<html lang="en">
<head>
    {% block title %}<title>Project Management</title>{% endblock %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- <script src="https://unpkg.com/htmx.org"></script>       --> 
    <script src="{{ static('htmx.min.js') }}"></script>      
    <script src="https://unpkg.com/alpinejs" defer></script> 
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js" defer></script> 
    <script src="{{static('bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js')}}">   </script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js"></script>
    <link rel="stylesheet" href="{{ static('bootstrap-5.1.3-dist/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/css/autoComplete.01.min.css">
    <style>
      {% include "site.css" %}
    </style>
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <span class="navbar-brand mb-0 h1">{{ _("PM") }}</span>
      <div>
        {% block header_menu %}<!-- insert default navigation text for every page -->{% endblock %}
      </div>
      <a href="{{ url("core:_logout")}}" class="btn link-light btn-link">{{ _("logout") }}</a>
    </div>
  </nav>
  <main class="container-fluid">
      <!--<div hx-ext="ws" ws-connect="/ws/rss/" > -->
    <div id="modal-container"></div>
        {% block content %}{% endblock %}
    </div>
  </main>
  <div id="ws-scripts"> </div>
  <script>
    const csrf_token =  '{{ csrf_token }}';
    const headers =   {  'X-CSRFToken' : csrf_token,  'Content-Type': 'application/json' };
    document.body.addEventListener('htmx:configRequest', (event) => {
      event.detail.headers['X-CSRFToken'] = csrf_token;
    });
    const GET = async (url) => {
        return await fetch( url, {headers});
    };
    const GETjson =  async (url) => {
        return await (await GET(url)).json();
    };               
    const PUT = async (url, body) => {
        return await fetch( url, {method: "PUT", headers , body : JSON.stringify(body)});
    };
    const POST = async (url, body, json_response = false) => {
        const headers = {'X-CSRFToken' : csrf_token, 'json-response' : json_response.toString()}
        return await fetch( url, {method: "POST",headers, body});
    };
    const DELETE = async (url) => {
        return await fetch( url, {method: "DELETE",headers  });
    };

    const setClipboard = (text) => {
        const type = "text/plain";
        const blob = new Blob([text], { type });
        const data = [new ClipboardItem({ [type]: blob })];
        navigator.clipboard.write(data);
    };

  </script>
</body>
</html>

