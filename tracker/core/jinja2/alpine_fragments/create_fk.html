{#
 expects to be passed in:
   attr: of the related model 
   hx_post:
   hx_vals:
   title: the title to display to the user
   border_color: the color of the choice buttons border
   background_color : the color of the choice buttons background
#}
<div>
    <div class='editor-normal'  >
        <div style='overflow-x: scroll, max-width: 100%;font-size: 0.8em'
             class="justify-content-between align-items-center d-flex" >
            <button type="button" class="btn btn-link mb-1"    
                    @click="edit_fk_value('{{attr}}') "> 
              {{title}}
            </button>
            <ul class="list-group list-group-horizontal d-flex align-items-center" 
                style='overflow-x: scroll; max-width: 80%;'>
                <template x-for="item in attr_as_array('{{attr}}')">   {# loop over all currently selected items to display them #} 
                    <li class="list-group-item d-flex p-1 me-1 bg-opacity-10 border-1 w-100 fw-bold"  
                        style="background-color: {{background_color}};
                               border-color:{{border_color}};">
                        <span x-html="item.name"></span>
                    </li>
                </template>
            </ul>
        </div>
    </div>

    <div  class="editor-insert"
          style="width: 100%;"
          method="post"
          hx-swap="none"
          hx-headers='{"json-response" : true}'
          hx-post="{{hx_post}}"
          hx-vals='{{hx_vals}}'
          @keyup.escape="cancel_edit_fk_value('{{attr}}')"
          @htmx:after-settle="'errors' in JSON.parse($event.detail.xhr.response) ? null :  update_model()">

        <div class="input-group input-group-sm d-flex align-items-center ">
          <span class="input-group-text"
                 :id="'{{attr}}_input'+ model.id+'-label'">
                 {{title}}
          </span>
          <input type="text" 
                 class="form-control" 
                 aria-label="" 
                 aria-label="" 
                 :aria-describedby="'{{attr}}_input'+ model.id+'-label'"
                 autocomplete="off" 
                 name="name"
                 :id="'{{attr}}_input'+ model.id"
                 @keyup.enter="cancel_edit_fk_value('{{attr}}')">
          <button type="button" class="btn-close ms-2" aria-label="Close" @click="cancel_edit_fk_value('{{attr}}')"></button>
        </div>
    </form>
</div>
