{% if len(results) > 0 %}
<ul id="ta{{attr}}"
    {%if hx_swap_oob%}hx-swap-oob="true"{%endif%}
    style="max-height: 300px; y-overflow: scroll"
    hx-trigger="refreshQResults{{m.replace(".","")}}{{attr}} from:body"
    hx-params="q, id_{{attr}}"
    hx-post="{{make_url('core:m2m_lookup')}}"
    class="list-group border border-dark mt-1" >
    {% for result in results %}
    <li class="list-group-item"
        hx-trigger="click"
        hx-swap="delete"
        hx-params="obj,id_{{attr}}"
        hx-post="{{result.__path__}}"
        hx-vals='{"obj" : {"id" : {{result.id}}, "name" : "{{result.name}}"}}'>
        
    <span class="badge bg-success">{{result.name}}</span> 
    </li>
    {% endfor %}
</ul>

{%else%}

<ul id="ta{{attr}}"
    {%if hx_swap_oob%}hx-swap-oob="true"{%endif%}
    hx-trigger="refreshQResults{{m.replace(".","")}}{{attr}} from:body"
    hx-params="q, id_{{attr}}"
    hx-post="{{make_url('core:m2m_lookup')}}" >
</ul>

{%endif%}
